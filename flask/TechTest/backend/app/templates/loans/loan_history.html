<!-- loan_history.html -->
{% extends "base.html" %}
{% block title %}Loan History{% endblock %}
{% block header %}Loan History for {{ user.name }}{% endblock %}
{% block content %}

<p><strong>Name:</strong> {{ user.name }}</p>
<p><strong>Email:</strong> {{ user.email }}</p>

{% if user.loans %}
    <h3>ðŸ“– Active Loans</h3>
    <table>
        <tr>
            <th>Title</th>
            <th>Author</th>
            <th>Loan Date</th>
            <th>Return Date</th>
            <th>Status</th>
        </tr>
        {% for loan in user.loans if loan.return_date > now %}
        <tr>
            <td><a href="/book/uuid/{{ loan.book.uuid }}">{{ loan.book.title }}</a></td>
            <td>{{ loan.book.author }}</td>
            <td>{{ loan.loan_date.strftime('%d-%m-%Y') }}</td>
            <td>{{ loan.return_date.strftime('%d-%m-%Y') }}</td>
            <td>ðŸ“• Borrowed</td>
        </tr>
        {% endfor %}
    </table>

    <h3>âœ… Returned Books</h3>
    <table>
        <tr>
            <th>Title</th>
            <th>Author</th>
            <th>Loan Date</th>
            <th>Return Date</th>
            <th>Status</th>
        </tr>
        {% for loan in user.loans if loan.return_date <= now %}
        <tr>
            <td><a href="/book/uuid/{{ loan.book.uuid }}">{{ loan.book.title }}</a></td>
            <td>{{ loan.book.author }}</td>
            <td>{{ loan.loan_date.strftime('%d-%m-%Y') }}</td>
            <td>{{ loan.return_date.strftime('%d-%m-%Y') }}</td>
            <td>âœ… Returned</td>
        </tr>
        {% endfor %}
    </table>

{% else %}
    <p>ðŸš« No loans found for this user.</p>
{% endif %}

<a href="/user/">ðŸ”™ Back to Users List</a>

{% endblock %}
